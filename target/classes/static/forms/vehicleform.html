<form role="form"
      name="variablesForm">

  <div class="row">

    <div class="col-xs-6">
      <h1>Loan Data</h1>

      <!-- Loan Type -->
      <div class="form-group">
        <label for="selectLoanType">Type of the loan</label>
        <div class="controls">
          <!--select box -->
          <select id="selectLoanType"
                  required
                  class="form-control"
                  name="loanType"
                  cam-variable-name="loanType"
                  cam-variable-type="String"
                  ng-change="calculateLoan()">
            <option value="mortage" checked>Mortage Loan (5%)</option>
            <option value="cashAdvance">Cash Advance (10%)</option>
          </select>
        </div>

        <!-- Custom validation message for select box -->
        <p ng-if="variablesForm.loanType.$invalid" style="color: red">
          Please select a loan type.
        </p>
      </div>

      <!-- Loan Amount -->
      <div class="form-group">
        <label for="inputLoanAmount">Amount</label>
        <div class="controls">
          <input id="inputLoanAmount"
                 required
                 class="form-control"
                 cam-variable-type="Double"
                 cam-variable-name="loanAmount"
                 min="1000"
                 ng-change="calculateLoan()"
                 name="loanAmount"
                 type="number"/>
        </div>
      </div>

      <!-- Runtime in Years -->
      <div class="form-group">
        <label for="inputLoanRuntime">Runtime (Years)</label>
        <div class="controls">
          <input id="inputLoanRuntime"
                 required
                 class="form-control"
                 cam-variable-type="Double"
                 cam-variable-name="loanRuntime"
                 min="2" max="30"
                 ng-change="calculateLoan()"
                 name="loanRuntime"
                 type="number"/>
        </div>
      </div>

      <!-- calculate monthly payment 
      Projected monthly payment:
      <p ng-if="monthlyPayment" class="alert alert-success">
        {{monthlyPayment}}â‚¬ at {{interest}}% interest rate.
      </p>-->
       
      <div class="form-group"><label for="monthlyPayment">monthlyPayment</label><input cam-variable-name="monthlyPayment"
           cam-variable-type="String"
           readonly="true"
           class="form-control" /></div>

      <!--<p ng-if="!monthlyPayment" class="alert alert-danger">
        0.
      </p>-->

      <!-- The following code demonstrates use of custom scripting.

            The 'cam-script' directive makes sure the the script is loaded and can bind to the angular $scope for the form.

            Access to form fields is provided through $scope.variablesForm.
         -->
      <script cam-script type="text/form-script">
      $scope.calculateLoan = function() {
        var form = $scope.variablesForm;

        if(!form.loanType.$valid || !form.loanAmount.$valid || !form.loanRuntime.$valid) {
          $scope.monthlyPayment = undefined;

        } else {

          var loanAmount = form.loanAmount.$modelValue;
          var years = form.loanRuntime.$modelValue;
          var loanType = form.loanType.$modelValue;
          var interestRate = 0;

          if(loanType == "mortage") {
            interestRate = 0.05;
          } else if(loanType == "cashAdvance") {
            interestRate = 0.10;
          }

          $scope.interest = 100 * interestRate;

          // calculate monthly payment using special formula provided by Bobby G
          $scope.monthlyPayment = (loanAmount * ((Math.pow((1+interestRate),years)*interestRate) / (Math.pow((1+interestRate),years)-1))) * (1/12);

        }
      }

      </script>

    </div>

    <div class="col-xs-6">
      <h2>Vehicle Data</h2>
      <html>
    <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
jQuery(function($) {
    var locations = {
        'two-wheeler': ['TVS', 'Bajaj', 'Honda','Royal-enfeild','Mahindra'],
        'four-wheeler': ['TATA','Swift','Maruthi-Suzuki']
    }

    var $locations = $('#state');
    $('#country').change(function () {
        var country = $(this).val(), lcns = locations[country] || [];

        var html = $.map(lcns, function(lcn){
            return '<option value="' + lcn + '">' + lcn + '</option>'
        }).join('');
        $locations.html(html)
    });
});
jQuery(function($) {
    var twowheeler = {
        'TVS': ['Apache', 'Ronin', 'Raider'],
        'Bajaj': ['Platina','CT100'],
        'Honda': ['Activa6G','SP125'],
        'Royal-enfeild':['Interceptor','Bullet','Continental GT 650'],
        'Mahindra':['Gusto125'],
        'TATA': ['safari', 'Nexon', 'Altroz'],
        'Swift': ['ZXIPlus DT AMT','ZXI CNG'],
        'Maruthi-Suzuki': ['Alto','EECO'] 
        
    }
    
    var $state = $('#city');
    $('#state').change(function () {
        var state = $(this).val(), state = twowheeler[state] || [];

        var html = $.map(state, function(two){
            return '<option value="' + two + '">' + two + '</option>'
        }).join('');
        $state.html(html)
    });
});
</script>
</head>
<body>
<form>
    <center>
    <table>
        <tr>
            <td>
                <label class="page1">Type of Vechile</label>
            </td>
        
        <td>
            <div class="tooltips" title="Please select the country that the customer will primarily be served from">
            
                <select cam-variable-name="country" cam-variable-type="String" id="country" name="country" placeholder="Phantasyland">
                    <option></option>
                    <option>two-wheeler</option>
                    <option>four-wheeler</option>
                </select>
            </div>
            
            
      

        </td>
    </tr>
    <tr>
        <td>
            <label class="page1">Make</label>
        </td>
        <td>
            <div class="tooltips" title="Please select the state that the customer is primarily to be served from.">
                <select cam-variable-name="state" cam-variable-type="String" id="state" name="state" placeholder="Anystate"></select>
            </div>        
        </td>

    </tr>
    
    <tr>
        <td>
            <label class="page1">Model</label>
        </td>
        <td>
            <div class="tooltips" title="Please select the city that the customer is primarily to be served from.">
                <select cam-variable-name="city" cam-variable-type="String" id="city" name="city" placeholder="Anycity"></select>
            </div>
        </td>
    </tr>
    <tr>
        <td>
            <label>Year</label>
        </td>
        <td>
            <input type="text" cam-variable-name="year" cam-variable-type="String" name="year">
        </td>
    </tr>
</table></center>


</form>

</html>

      

    </div>

  </div>
</form>
